
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flower Gift üå∏</title>
</head>
<style>
     @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap");

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}

body {
  background: linear-gradient(to bottom right, #ffe6f0, #fff5fa);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.container {
  width: 100%;
  max-width: 900px;
  background: #fff5f9;
  padding: clamp(15px, 4vw, 30px);
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
  text-align: center;
}

h1 {
  font-size: clamp(1.5rem, 4vw, 2rem);
  color: #ff4d88;
  margin-bottom: 15px;
}

p {
  font-size: 1rem;
  color: #ff69b4;
  margin-bottom: 20px;
}

.btn {
  margin-top: 15px;
  padding: 12px 25px;
  border: none;
  background: #ff4d88;
  color: white;
  font-size: 1rem;
  border-radius: 12px;
  cursor: pointer;
  transition: 0.3s;
}
.btn:hover {
  background: #ff1a66;
  transform: scale(1.05);
}

.btn:active {
  transform: scale(0.98);
}

@media (hover: hover) {
  .flower-card:hover {
    transform: translateY(-6px) scale(1.05);
    background: #ffe0eb;
  }
}

.flower-card:active {
  transform: translateY(-2px) scale(1.02);
}

/* FLOWERS */
.flowers { display: block; margin-top: 25px; }

.flower-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 15px;
}

.flower-card {
  background: #fff0f6;
  padding: 15px;
  border-radius: 15px;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 5px 12px rgba(255, 105, 180, 0.15);
}
.flower-card img {
  width: 70px;
  height: 70px;
  object-fit: contain;
}
.flower-card h3 {
  margin-top: 10px;
  font-size: 1rem;
  color: #ff3385;
}
.flower-desc {
  font-size: 0.8rem;
  color: #ff3385;
  margin-top: 5px;
}

/* GIFT AREA */
.gift-area { 
  display: none; 
  margin-top: 30px; 
}

.gift-area img {
  width: clamp(140px, 40vw, 250px);
  animation: floatFlower 2s infinite ease-in-out;
}

.gift-text {
  margin-top: 20px;
  font-size: clamp(1rem, 3.5vw, 1.4rem);
  color: #ff2d75;
  font-weight: bold;
}

.gift-area .btn {
  display: inline-block;
  margin: 8px 5px;
}

@keyframes floatFlower {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-15px); }
}

/* ===== Meaning Wrapper ===== */
.meaning-wrapper {
  position: relative;
}

/* Base style for both sides */
.meaning {
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  width: clamp(160px, 18vw, 220px);
  display: flex;
  flex-direction: column;
  gap: 15px;
  z-index: 5;
}

/* LEFT SIDE */
.meaning.left {
  width: 35%;
  left: 3%;
  align-items: flex-end;
}

/* RIGHT SIDE */
.meaning.right {
  width: 35%;
  right: 3%;
  align-items: flex-start;
}

/* Bubble Style */
.meaning p {
  background: linear-gradient(135deg, #ffd6e6, #ffe6f0);
  padding: 12px 18px;
  border-radius: 25px;
  font-size: clamp(12px, 1.1vw, 14px);
  font-weight: 600;
  color: #ffffff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  box-shadow: 0 6px 16px rgba(255,79,129,0.2);
  animation: floatUpDown 3s ease-in-out infinite;
  position: relative;
  max-width: 100%;
}

/* Bubble tails */
/* .meaning.left p::after {
  content: "";
  position: absolute;
  right: -8px;
  top: 50%;
  transform: translateY(-50%);
  border: 8px solid transparent;
  border-left-color: #ffd6e6;
}

.meaning.right p::after {
  content: "";
  position: absolute;
  left: -8px;
  top: 50%;
  transform: translateY(-50%);
  border: 8px solid transparent;
  border-right-color: #ffd6e6;
} */

/* Floating animation */
@keyframes floatUpDown {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}


/* MODAL */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  inset: 0;
  background: rgba(255, 105, 180, 0.4);
  backdrop-filter: blur(3px);
}
.modal-content {
  background: linear-gradient(135deg,#ffe6ee,#ffd6e6);
  margin: 15% auto;
  padding: 20px;
  border-radius: 20px;
  width: 90%;
  max-width: 400px;
  text-align: center;
  animation: modalPop 0.4s ease-out;
  box-shadow: 0 10px 40px rgba(255, 105, 180, 0.3);
}

.modal-content h2 {
  color: #ff4d88;
  margin-bottom: 15px;
}

.modal-content p {
  color: #ff69b4;
}
.gift-img {
  width: clamp(120px, 50vw, 180px);
}
.modal .close {
  position: absolute;
  right: 15px;
  top: 10px;
  font-size: 28px;
  cursor: pointer;
  color: #ff4d88;
  font-weight: bold;
  transition: 0.3s;
}

.modal .close:hover {
  color: #ff1a66;
  transform: scale(1.2);
}
@keyframes modalPop {
  from { transform: scale(0.5); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* TABLET AND SMALL DESKTOP */
@media (max-width: 1024px) {
  .container {
    max-width: 95%;
    padding: clamp(20px, 3vw, 25px);
  }
  
  .meaning.left,
  .meaning.right {
    width: 30%;
  }
  
  .meaning p {
    font-size: clamp(10px, 1.2vw, 13px);
    padding: 10px 15px;
  }
  
  .flower-grid {
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 12px;
  }
}

/* TABLET */
@media (max-width: 768px) {
  body {
    padding: 15px;
  }
  
  .container {
    padding: clamp(15px, 3vw, 20px);
  }
  
  h1 {
    font-size: clamp(1.3rem, 5vw, 1.8rem);
    margin-bottom: 12px;
  }
  
  p {
    font-size: clamp(0.9rem, 2.5vw, 1rem);
    margin-bottom: 15px;
  }
  
  .flower-grid {
    grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
    gap: 10px;
  }
  
  .flower-card {
    padding: 12px;
  }
  
  .flower-card img {
    width: 60px;
    height: 60px;
  }
  
  .flower-card h3 {
    font-size: clamp(0.85rem, 2vw, 0.95rem);
    margin-top: 8px;
  }
  
  .flower-desc {
    font-size: clamp(0.7rem, 1.8vw, 0.75rem);
  }
  
  .btn {
    padding: 10px 20px;
    font-size: clamp(0.9rem, 2.2vw, 1rem);
    margin-top: 12px;
    min-height: 44px; /* Better touch target */
  }
  
  .gift-area .btn {
    display: inline-block;
    margin: 8px 5px;
  }
  
  .gift-area img {
    width: clamp(120px, 35vw, 200px);
  }
  
  .gift-text {
    font-size: clamp(0.9rem, 3vw, 1.2rem);
    margin-top: 15px;
  }
  
  .meaning-wrapper {
    position: relative;
  }
  
  .meaning {
    position: relative;
    width: 100%;
    left: auto;
    right: auto;
    top: auto;
    transform: none;
    margin: 10px 0;
    align-items: center;
  }
  
  .meaning.left,
  .meaning.right {
    width: 100%;
    align-items: center;
  }
  
  .meaning p {
    text-align: center;
    font-size: clamp(9px, 2vw, 11px);
    padding: 8px 12px;
    max-width: 90%;
  }
  
  #pickflowerBtn,
  #receivedBtn {
    font-size: clamp(0.85rem, 2vw, 0.95rem);
    padding: 10px 18px;
    width: auto;
    display: inline-block;
    margin: 8px 5px;
  }
  
  #giftMessage {
    font-size: clamp(0.9rem, 2.8vw, 1.1rem);
    margin-top: 20px;
    padding: 0 10px;
  }
  
  .modal-content {
    width: 85%;
    max-width: 350px;
    padding: 18px;
    margin: 20% auto;
  }
  
  .modal .close {
    font-size: 24px;
    right: 12px;
    top: 8px;
  }
}

/* MOBILE PHONE */
@media (max-width: 480px) {
  body {
    padding: 10px;
  }
  
  .container {
    padding: clamp(12px, 4vw, 18px);
    border-radius: 15px;
  }
  
  h1 {
    font-size: clamp(1.1rem, 6vw, 1.5rem);
    margin-bottom: 10px;
    line-height: 1.3;
  }
  
  p {
    font-size: clamp(0.85rem, 3vw, 0.95rem);
    margin-bottom: 12px;
  }
  
  .flower-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }
  
  .flower-card {
    padding: 10px 8px;
    border-radius: 12px;
  }
  
  .flower-card img {
    width: 50px;
    height: 50px;
  }
  
  .flower-card h3 {
    font-size: clamp(0.8rem, 3vw, 0.9rem);
    margin-top: 6px;
  }
  
  .flower-desc {
    font-size: clamp(0.65rem, 2.5vw, 0.7rem);
    margin-top: 4px;
    line-height: 1.3;
  }
  
  .btn {
    padding: 10px 16px;
    font-size: clamp(0.85rem, 3vw, 0.95rem);
    border-radius: 10px;
    margin-top: 10px;
    width: auto;
    min-width: 140px;
    min-height: 44px; /* Better touch target */
  }
  
  .gift-area .btn {
    display: block;
    width: 100%;
    max-width: 200px;
    margin: 8px auto;
  }
  
  .gift-area {
    margin-top: 20px;
  }
  
  .gift-area img {
    width: clamp(100px, 40vw, 160px);
  }
  
  .gift-text {
    font-size: clamp(0.85rem, 3.5vw, 1rem);
    margin-top: 12px;
    padding: 0 8px;
  }
  
  .meaning p {
    font-size: clamp(8px, 2.5vw, 10px);
    padding: 6px 10px;
    max-width: 95%;
  }
  
  #pickflowerBtn,
  #receivedBtn {
    font-size: clamp(0.8rem, 2.8vw, 0.9rem);
    padding: 9px 14px;
    margin: 6px 3px;
    width: calc(50% - 6px);
    max-width: 160px;
  }
  
  #giftMessage {
    font-size: clamp(0.85rem, 3.2vw, 1rem);
    margin-top: 15px;
  }
  
  .modal-content {
    width: 90%;
    max-width: 300px;
    padding: 15px;
    margin: 25% auto;
  }
  
  .modal-content h2 {
    font-size: clamp(1.1rem, 4vw, 1.3rem);
  }
  
  .modal-content p {
    font-size: clamp(0.85rem, 3vw, 0.95rem);
    color: #ff69b4;
  }
  
  .modal-content h2 {
    color: #ff4d88;
  }
  
  .gift-img {
    width: clamp(100px, 45vw, 150px);
  }
  
  .modal .close {
    font-size: 22px;
    right: 10px;
    top: 6px;
  }
}

/* SMALL MOBILE PHONE */
@media (max-width: 360px) {
  .container {
    padding: 10px;
  }
  
  h1 {
    font-size: clamp(1rem, 7vw, 1.3rem);
  }
  
  .flower-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
  }
  
  .flower-card {
    padding: 8px 6px;
  }
  
  .flower-card img {
    width: 45px;
    height: 45px;
  }
  
  .flower-card h3 {
    font-size: clamp(0.75rem, 3.5vw, 0.85rem);
  }
  
  .flower-desc {
    font-size: clamp(0.6rem, 2.8vw, 0.65rem);
  }
  
  .btn {
    padding: 8px 12px;
    font-size: clamp(0.75rem, 3.2vw, 0.85rem);
    min-width: 120px;
    min-height: 40px; /* Better touch target */
  }
  
  .gift-area .btn {
    display: block;
    width: 100%;
    max-width: 180px;
    margin: 6px auto;
  }
  
  #pickflowerBtn,
  #receivedBtn {
    width: calc(50% - 4px);
    padding: 8px 10px;
    font-size: clamp(0.75rem, 3vw, 0.85rem);
  }
  
  .meaning p {
    font-size: clamp(7px, 2.8vw, 9px);
    padding: 5px 8px;
  }
  
  .modal-content {
    width: 92%;
    padding: 12px;
  }
}

/* LANDSCAPE MOBILE */
@media (max-width: 768px) and (orientation: landscape) {
  .meaning {
    position: relative;
    width: 48%;
    display: inline-block;
    vertical-align: top;
  }
  
  .meaning.left {
    left: 1%;
  }
  
  .meaning.right {
    right: 1%;
  }
  
  .meaning p {
    font-size: clamp(8px, 1.5vw, 10px);
    padding: 6px 10px;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
  
  .gift-area img {
    width: clamp(100px, 25vw, 180px);
  }
  
  #giftMessage {
    margin-top: 10px;
  }
  
  body {
    padding: 10px;
  }
  
  .container {
    max-width: 98%;
  }
}

/* EXTRA LARGE SCREENS */
@media (min-width: 1200px) {
  .container {
    max-width: 1000px;
  }
  
  .flower-grid {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 20px;
  }
  
  .flower-card img {
    width: 80px;
    height: 80px;
  }
}

/* MUSIC CONTROL */
.music-control {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 100;
  background: #ff4d88;
  border: none;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  color: white;
  font-size: 24px;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.music-control:hover {
  background: #ff1a66;
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(255, 105, 180, 0.6);
}

.music-control:active {
  transform: scale(0.95);
}

.music-control.playing {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 4px 15px rgba(255, 105, 180, 0.4);
  }
  50% {
    box-shadow: 0 4px 25px rgba(255, 105, 180, 0.8);
  }
}

.audio-player {
  display: none;
}

/* PRINT STYLES */
@media print {
  body {
    background: white;
  }
  
  .container {
    box-shadow: none;
  }
  
  .btn {
    display: none;
  }
  
  .music-control {
    display: none;
  }
}

/* MOBILE MUSIC CONTROL */
@media (max-width: 768px) {
  .music-control {
    width: 50px;
    height: 50px;
    font-size: 20px;
    bottom: 15px;
    right: 15px;
  }
}

@media (max-width: 480px) {
  .music-control {
    width: 45px;
    height: 45px;
    font-size: 18px;
    bottom: 10px;
    right: 10px;
  }
}
</style>

<body>

  <div class="container">

    <!-- Step 2 -->
    <div class="flowers" id="step2">
      <h1>üå∏üíñ Hello Sage Laki üå∏üíñ</h1>
      <p>Select the flower you want to receive:</p>

      <div class="flower-grid">

<div class="flower-card" onclick="giveFlower('Daisy','üåπ','hand flower1.png')" data-description="A sweet and innocent flower that symbolizes love and cheerfulness üåº">
  <img src="design flower1.png">
  <h3>Daisy</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Lavender','üåª','hand flower2.png')" data-description="Calming lavender that brings peace, grace, and serenity üíú">
  <img src="design flower2.png">
  <h3>Lavender</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Sunflower','üå∑','hand flower3.png')" data-description="Bright sunflower full of happiness, positivity, and warmth ‚òÄÔ∏è">
  <img src="design flower3.png">
  <h3>Sunflower</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Roses','üåº','hand flower4.png')" data-description="Romantic and passionate roses to express deep love ‚ù§Ô∏è">
  <img src="design flower4.png">
  <h3>Roses</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Yellow Roses','üå∏','hand flower5.png')" data-description="Joyful yellow roses that symbolize friendship and care üíõ">
  <img src="design flower5.png">
  <h3>Yellow Roses</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Lilies and Roses','ü™∑','hand flower6.png')" data-description="Elegant combination of lilies and roses for purity and heartfelt love üíï">
  <img src="design flower6.png">
  <h3>Lilies and Roses</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Red Roses','üåπ','hand flower7.png')" data-description="Classic red roses representing deep passion and eternal love ‚ù§Ô∏è">
  <img src="design flower7.png">
  <h3>Red Roses</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Pink Roses','üå∑','hand flower8.png')" data-description="Gentle pink roses symbolizing admiration, gratitude, and sweet affection üíó">
  <img src="design flower8.png">
  <h3>Pink Roses</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('White Roses','ü§ç','hand flower9.png')" data-description="Pure white roses representing innocence, new beginnings, and everlasting love ‚ö™">
  <img src="design flower9.png">
  <h3>White Roses</h3>
   <p class="flower-desc"></p>
</div>

<div class="flower-card" onclick="giveFlower('Orange Roses','üß°','hand flower10.png')" data-description="Vibrant orange roses expressing enthusiasm, desire, and fascination üß°">
  <img src="design flower10.png">
  <h3>Orange Roses</h3>
   <p class="flower-desc"></p>
</div>

      </div>
    </div>

    <!-- Step 3 -->
    <div class="gift-area" id="giftArea">
      <img id="giftFlower" src="">


      <div class="gift-text" id="giftMessage"></div>
      <button class="btn" id="pickflowerBtn" onclick="restart()">Pick Another Flower</button>
      <button class="btn" id="receivedBtn">Received the flower?</button>
    </div>
<div class="meaning-wrapper">
  <div class="meaning left" id="leftMeanings"></div>
  <div class="meaning right" id="rightMeanings"></div>
</div>

  </div>
  
<!-- Background Music -->
<audio id="bgMusic" class="audio-player" loop preload="auto" volume="0.7">
  <source src="Iris.mp3" type="audio/mpeg">
  <source src="Iris.ogg" type="audio/ogg">
  <source src=Iris.mp3" type="audio/mpeg">
  <source src="Iris.ogg" type="audio/ogg">
  Your browser does not support the audio element.
</audio>

<!-- Music Control Button -->
<button class="music-control" id="musicBtn" onclick="toggleMusic()" title="Play/Pause Music">
  <span id="musicIcon">üéµ</span>
</button>
  
<!-- Modal -->
<div id="giftModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>üéÅ Surprise!</h2>
    <img src="cutegif.gif" alt="Cute gift" class="gift-img">
    <p>Because you received the flower, let's have a date on Feb 14! üíñ</p>
  </div>
</div>

  <script>
    // Add descriptions from data attribute
document.querySelectorAll('.flower-card').forEach(card => {
  const desc = card.querySelector('.flower-desc');
  desc.textContent = card.dataset.description;
});
  const flowerColors = {
  Daisy: { bg: "linear-gradient(135deg, #fffacd, #fff8dc)", tail: "#fffacd" },
  Lavender: { bg: "linear-gradient(135deg, #e6e6fa, #d8bfd8)", tail: "#e6e6fa" },
  Sunflower: { bg: "linear-gradient(135deg, #fff200, #ffd700)", tail: "#ffd700" },
  Roses: { bg: "linear-gradient(135deg, #ff4f81, #ff6b9b)", tail: "#ff4f81" },
  "Yellow Roses": { bg: "linear-gradient(135deg, #fff700, #ffec6b)", tail: "#fff700" },
  "Lilies and Roses": { bg: "linear-gradient(135deg, #ffe6f0, #ffd6e6)", tail: "#ffd6e6" },
  "Red Roses": { bg: "linear-gradient(135deg, #dc143c, #ff1744)", tail: "#dc143c" },
  "Pink Roses": { bg: "linear-gradient(135deg, #ffb6c1, #ffc0cb)", tail: "#ffb6c1" },
  "White Roses": { bg: "linear-gradient(135deg, #f5f5f5, #ffffff)", tail: "#f5f5f5" },
  "Orange Roses": { bg: "linear-gradient(135deg, #ff8c00, #ffa500)", tail: "#ff8c00" }
};

const flowerMeanings = {
  Daisy: [
    "Innocent love that warms the heart ü§ç",
    "A pure and tender soul üåº",
    "New beginnings together ‚ú®",
    "Loyal love that never fades üíõ",
    "Cheerfulness that lights up your days üòä",
    "Hopeful days filled with laughter and joy üå§Ô∏è"
  ],
  Lavender: [
    "A calm and peaceful love üíú",
    "Gentle affection that soothes the soul üåø",
    "Healing energy for hearts entwined ‚ú®",
    "Devotion that stands the test of time üíï",
    "Grace and elegance in every gesture üå∏",
    "Serenity found in your embrace üåô"
  ],
  Sunflower: [
    "Happiness that blooms with your smile üåª",
    "Warmth that fills every moment together ‚òÄÔ∏è",
    "Positivity that inspires our love üíõ",
    "Loyalty that never wavers ü§ù",
    "A bright future shining just for us ‚ú®",
    "Admiration for all that you are üí´"
  ],
  Roses: [
    "Deep, passionate love that takes your breath away ‚ù§Ô∏è",
    "Romance that colors every day üåπ",
    "Desire that burns bright and eternal üî•",
    "Beauty that captivates the heart üå∫",
    "Respect and admiration in every glance üíñ",
    "A forever bond that unites our souls ‚ôæÔ∏è"
  ],
  "Yellow Roses": [
    "Friendship blossoming into love ü§ù",
    "Joy that lights up our shared moments üíõ",
    "Sweet memories to treasure forever üì∏",
    "Care that comforts the heart üåº",
    "Support that lifts us higher üåü",
    "Smiles that make the world brighter together üòä"
  ],
  "Lilies and Roses": [
    "Purity of heart in our love ü§ç",
    "Graceful moments shared in togetherness üå∏",
    "Elegant love that grows with each passing day üíï",
    "Devotion that knows no bounds üí´",
    "Peace that only true love can bring üïäÔ∏è",
    "Heartfelt feelings that speak louder than words üíñ"
  ],
  "Red Roses": [
    "Passionate love that burns with intensity ‚ù§Ô∏è",
    "Eternal devotion that never fades away üíï",
    "Romance that ignites the soul üî•",
    "Deep affection that speaks from the heart üíñ",
    "A love story written in crimson petals üåπ",
    "Forever yours, with all my heart ‚ô•Ô∏è"
  ],
  "Pink Roses": [
    "Gentle admiration that grows each day üíó",
    "Sweet gratitude for your beautiful presence üå∏",
    "Tender affection that warms the heart üíï",
    "Elegant love that blooms gracefully üå∫",
    "Appreciation for every moment together ‚ú®",
    "A soft love that whispers sweetly üíù"
  ],
  "White Roses": [
    "Pure love that shines like starlight ‚≠ê",
    "New beginnings filled with hope üåü",
    "Innocent devotion that's everlasting ü§ç",
    "A fresh start to our beautiful journey üå±",
    "Serene love that brings peace to the soul üïäÔ∏è",
    "Eternal purity in our bond together üí´"
  ],
  "Orange Roses": [
    "Enthusiastic love that's full of energy üß°",
    "Desire that burns bright and warm üî•",
    "Fascination with every part of you ‚ú®",
    "Passionate excitement for our future together üåÖ",
    "Vibrant love that colors our world üåà",
    "A zest for life shared between us üíõ"
  ]
};

// Music elements
const bgMusic = document.getElementById("bgMusic");
const musicBtn = document.getElementById("musicBtn");
const musicIcon = document.getElementById("musicIcon");
let isPlaying = false;

// Set volume (0.0 to 1.0)
if (bgMusic) {
  bgMusic.volume = 0.7;
}

// Handle audio loading errors
bgMusic.addEventListener('error', function(e) {
  console.log('Audio loading error:', e);
  // Try alternative path if main path fails
  if (bgMusic.src && !bgMusic.src.includes('./')) {
    const sources = bgMusic.querySelectorAll('source');
    if (sources.length > 0) {
      // Try next source
      const currentSrc = bgMusic.currentSrc || bgMusic.src;
      console.log('Trying alternative audio source');
    }
  }
});

// Handle audio loaded
bgMusic.addEventListener('loadeddata', function() {
  console.log('Audio loaded successfully');
});

// Toggle music function
function toggleMusic() {
  if (!bgMusic) return;
  
  if (isPlaying) {
    bgMusic.pause();
    musicIcon.textContent = "üéµ";
    musicBtn.classList.remove("playing");
    isPlaying = false;
  } else {
    // Set volume before playing
    bgMusic.volume = 0.7;
    
    const playPromise = bgMusic.play();
    
    if (playPromise !== undefined) {
      playPromise.then(() => {
        // Audio is playing
        musicIcon.textContent = "üé∂";
        musicBtn.classList.add("playing");
        isPlaying = true;
      }).catch(error => {
        console.log("Autoplay prevented. User interaction required:", error);
        // Show user they need to interact
        musicIcon.textContent = "üîá";
      });
    }
  }
}

// Try to play music on user interaction (when they click anywhere)
document.addEventListener('click', function() {
  if (bgMusic && !isPlaying && bgMusic.paused) {
    bgMusic.volume = 0.7;
    const playPromise = bgMusic.play();
    
    if (playPromise !== undefined) {
      playPromise.then(() => {
        musicIcon.textContent = "üé∂";
        musicBtn.classList.add("playing");
        isPlaying = true;
      }).catch(error => {
        // Autoplay was prevented, user needs to click the button
        console.log("Autoplay prevented on first click");
      });
    }
  }
}, { once: true });

// Handle page visibility - pause when tab is hidden, resume when visible
document.addEventListener('visibilitychange', function() {
  if (bgMusic) {
    if (document.hidden) {
      // Tab is hidden, pause music
      if (isPlaying) {
        bgMusic.pause();
      }
    } else {
      // Tab is visible, resume if it was playing
      if (isPlaying && bgMusic.paused) {
        bgMusic.play().catch(error => {
          console.log("Could not resume audio:", error);
        });
      }
    }
  }
});

// Modal elements
const modal = document.getElementById("giftModal");
const receivedBtn = document.getElementById("receivedBtn");
const closeBtn = modal.querySelector(".close");

// Show modal on button click
receivedBtn.addEventListener("click", () => {
  modal.style.display = "block";
});

// Close modal when clicking the X
closeBtn.addEventListener("click", () => {
  modal.style.display = "none";
});

// Close modal when clicking outside the modal content
window.addEventListener("click", (e) => {
  if (e.target === modal) {
    modal.style.display = "none";
  }
});


     function giveFlower(flowerName, emoji, imgSrc) {
    document.getElementById("step2").style.display = "none";
    document.getElementById("giftArea").style.display = "block";

    let flowerImg = document.getElementById("giftFlower");

    // Reset animation
    flowerImg.classList.remove("give-animation");
    void flowerImg.offsetWidth;

    // Show correct flower
    flowerImg.src = imgSrc;

    // Add animation
    flowerImg.classList.add("give-animation");

    document.getElementById("giftMessage").innerHTML =
      `üíù Someone is giving you a beautiful <b>${flowerName}</b> ${emoji}!`;
        // ‚ú® Show meanings
  const meanings = flowerMeanings[flowerName];
  const left = document.getElementById("leftMeanings");
  const right = document.getElementById("rightMeanings");

  left.innerHTML = "";
  right.innerHTML = "";

// Replace this in giveFlower()
meanings.slice(0, 3).forEach(text => {
  showMeaning(flowerName, text, "left");
});

meanings.slice(3, 6).forEach(text => {
  showMeaning(flowerName, text, "right");
});

  } 

// Helper function to check if a color is light
function isLightColor(hexColor) {
  // Remove # if present
  let hex = hexColor.replace('#', '');
  
  // Convert hex to RGB
  const r = parseInt(hex.substring(0, 2), 16);
  const g = parseInt(hex.substring(2, 4), 16);
  const b = parseInt(hex.substring(4, 6), 16);
  
  // Calculate brightness (using relative luminance formula)
  const brightness = (r * 299 + g * 587 + b * 114) / 1000;
  
  // If brightness is above 180, it's considered light (lowered threshold for better detection)
  return brightness > 180;
}

// List of flowers that need dark text (light backgrounds)
const lightBackgroundFlowers = ['Daisy', 'White Roses', 'Yellow Roses', 'Sunflower', 'Lavender'];

function showMeaning(flowerName, meaning, side = "left") {
  const meaningContainer = document.querySelector(`.meaning.${side}`);
  const p = document.createElement("p");
  p.textContent = meaning;

  // get gradient and tail
  const colorData = flowerColors[flowerName] || { 
    bg: "linear-gradient(135deg, #ffe6ee, #ffd6e6)", 
    tail: "#ffd6e6" 
  };

  // APPLY GRADIENT CORRECTLY
  p.style.background = colorData.bg; // <-- use 'background', not backgroundImage
  // SET TAIL COLOR
  p.style.setProperty("--bubble-tail-color", colorData.tail);

  // Determine text color based on background brightness
  // Check if flower has light background or if tail color is light
  const needsDarkText = lightBackgroundFlowers.includes(flowerName) || isLightColor(colorData.tail);
  
  if (needsDarkText) {
    // Light background - use dark pink text for better visibility
    p.style.color = '#8b1a4d';
    p.style.textShadow = '0 1px 3px rgba(255, 255, 255, 0.9), 0 0 2px rgba(255, 255, 255, 0.5)';
    p.style.fontWeight = '700';
  } else {
    // Dark background - use white text
    p.style.color = '#ffffff';
    p.style.textShadow = '0 1px 3px rgba(0, 0, 0, 0.5), 0 0 2px rgba(0, 0, 0, 0.3)';
  }

  // add bubble class
  p.classList.add(side === "left" ? "left-bubble" : "right-bubble");

  meaningContainer.appendChild(p);
}




    function restart() {
  document.getElementById("giftArea").style.display = "none";
  document.getElementById("step2").style.display = "block";
  document.getElementById("leftMeanings").innerHTML = "";
  document.getElementById("rightMeanings").innerHTML = "";
      
    }
  </script>

</body>
</html>
